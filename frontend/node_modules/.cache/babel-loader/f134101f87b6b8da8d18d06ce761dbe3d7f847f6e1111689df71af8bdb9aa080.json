{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{jwtDecode}from'jwt-decode';import'../App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const[modules,setModules]=useState([]);const[progress,setProgress]=useState(0);const[userId,setUserId]=useState(null);const fetchPath=async(uid,token)=>{try{const{data}=await axios.get(`http://localhost:5000/api/path/path/${uid}`,{headers:{Authorization:`Bearer ${token}`}});setModules(data);updateProgress(data);}catch(err){console.error('Error fetching path:',err);}};const updateProgress=moduleList=>{const completed=moduleList.filter(m=>m.is_completed).length;const pct=Math.floor(completed/moduleList.length*100);setProgress(pct);};const toggleComplete=async moduleId=>{try{const updated=modules.map(mod=>mod.id===moduleId?{...mod,is_completed:!mod.is_completed}:mod);setModules(updated);updateProgress(updated);await axios.post(`http://localhost:5000/api/path/toggle`,{userId,moduleId});}catch(err){console.error('Error updating module status:',err);}};useEffect(()=>{const token=localStorage.getItem('token');if(!token)return;const decoded=jwtDecode(token);setUserId(decoded.id);fetchPath(decoded.id,token);},[]);const handleLogout=()=>{localStorage.removeItem('token');window.location.href='/';};return/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"logout-btn\",onClick:handleLogout,children:\"Logout\"}),/*#__PURE__*/_jsx(\"h2\",{style:{textAlign:'center'},children:\"Your Learning Path\"}),/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"progress-fill\",style:{width:`${progress}%`}})}),/*#__PURE__*/_jsxs(\"p\",{style:{textAlign:'center',marginBottom:'2rem'},children:[progress,\"% completed\"]}),modules.map((mod,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:`module-card ${mod.is_completed?'completed':''}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"module-title\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:mod.is_completed,onChange:()=>toggleComplete(mod.id),style:{marginRight:'10px'}}),/*#__PURE__*/_jsx(\"span\",{children:mod.title||'Untitled Module'})]}),/*#__PURE__*/_jsx(\"a\",{className:\"module-link\",href:mod.content_link?mod.content_link.startsWith('http')?mod.content_link:`https://${mod.content_link}`:'#',target:\"_blank\",rel:\"noopener noreferrer\",children:\"View Resource \\u2197\"})]},mod.id))]});};export default Dashboard;","map":{"version":3,"names":["React","useEffect","useState","axios","jwtDecode","jsx","_jsx","jsxs","_jsxs","Dashboard","modules","setModules","progress","setProgress","userId","setUserId","fetchPath","uid","token","data","get","headers","Authorization","updateProgress","err","console","error","moduleList","completed","filter","m","is_completed","length","pct","Math","floor","toggleComplete","moduleId","updated","map","mod","id","post","localStorage","getItem","decoded","handleLogout","removeItem","window","location","href","className","children","onClick","style","textAlign","width","marginBottom","idx","type","checked","onChange","marginRight","title","content_link","startsWith","target","rel"],"sources":["D:/learning-path-generator/frontend/src/pages/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { jwtDecode } from 'jwt-decode';\r\nimport '../App.css';\r\n\r\nconst Dashboard = () => {\r\n  const [modules, setModules] = useState([]);\r\n  const [progress, setProgress] = useState(0);\r\n  const [userId, setUserId] = useState(null);\r\n\r\n  const fetchPath = async (uid, token) => {\r\n    try {\r\n      const { data } = await axios.get(`http://localhost:5000/api/path/path/${uid}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n      setModules(data);\r\n      updateProgress(data);\r\n    } catch (err) {\r\n      console.error('Error fetching path:', err);\r\n    }\r\n  };\r\n\r\n  const updateProgress = (moduleList) => {\r\n    const completed = moduleList.filter((m) => m.is_completed).length;\r\n    const pct = Math.floor((completed / moduleList.length) * 100);\r\n    setProgress(pct);\r\n  };\r\n\r\n  const toggleComplete = async (moduleId) => {\r\n    try {\r\n      const updated = modules.map((mod) =>\r\n        mod.id === moduleId ? { ...mod, is_completed: !mod.is_completed } : mod\r\n      );\r\n      setModules(updated);\r\n      updateProgress(updated);\r\n\r\n      await axios.post(`http://localhost:5000/api/path/toggle`, {\r\n        userId,\r\n        moduleId,\r\n        \r\n      });\r\n    } catch (err) {\r\n      console.error('Error updating module status:', err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) return;\r\n\r\n    const decoded = jwtDecode(token);\r\n    setUserId(decoded.id);\r\n    fetchPath(decoded.id, token);\r\n  }, []);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('token');\r\n    window.location.href = '/';\r\n  };\r\n\r\n  return (\r\n    <div className=\"app-container\">\r\n  \r\n\r\n\r\n       <button className=\"logout-btn\" onClick={handleLogout}>Logout</button>\r\n\r\n      <h2 style={{ textAlign: 'center' }}>Your Learning Path</h2>\r\n      <div className=\"progress-bar\">\r\n        <div className=\"progress-fill\" style={{ width: `${progress}%` }}></div>\r\n      </div>\r\n      <p style={{ textAlign: 'center', marginBottom: '2rem' }}>{progress}% completed</p>\r\n\r\n      {modules.map((mod, idx) =>(\r\n        \r\n        <div className={`module-card ${mod.is_completed ? 'completed' : ''}`} key={mod.id}>\r\n          <div className=\"module-title\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={mod.is_completed}\r\n              onChange={() => toggleComplete(mod.id)}\r\n              style={{ marginRight: '10px' }}\r\n            />\r\n            <span>{mod.title || 'Untitled Module'}</span>\r\n          </div>\r\n          <a\r\n            className=\"module-link\"\r\n            href={\r\n    mod.content_link\r\n      ? mod.content_link.startsWith('http')\r\n        ? mod.content_link\r\n        : `https://${mod.content_link}`\r\n      : '#'\r\n  }\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n          >\r\n            View Resource â†—\r\n          </a>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}